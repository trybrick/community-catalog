.catalog:
  name: "prerender"
  version: "v0.1"
  description: "prerender.io spa application"
  questions:
    - variable: "REDIS_URL"
      description: "Redis connection string."
      label: "REDIS_URL"
      default: "redis://redis:6379/0"
      type: "string"
      required: true
    - variable: "PAGE_TTL"
      description: "TTL on keys set in seconds.  Default to 1 day."
      label: "PAGE_TTL"
      default: 86400
      type: "int"
      required: false
    - variable: "BASIC_AUTH_USERNAME"
      description: "Allow for basic auth."
      label: "BASIC_AUTH_USERNAME"
      default: ""
      type: "string"
      required: false
    - variable: "BASIC_AUTH_PASSWORD"
      description: "Password for basic auth."
      label: "BASIC_AUTH_PASSWORD"
      default: ""
      type: "string"
      required: false
    - variable: "PRERENDER_NUM_WORKERS"
      description: "Number of workers"
      label: "PRERENDER_NUM_WORKERS"
      default: 4
      type: "int"
      required: false

prerender:
  health_check:
    # Which port to perform the check against
    port: 3000
    # For TCP, request_line needs to be '' or not shown
    # TCP Example:
    # request_line: ''
    request_line: GET /healthcheck HTTP/1.0
    # Interval is measured in milliseconds
    interval: 6000
    initializing_timeout: 60000
    reinitializing_timeout: 60000
    unhealthy_threshold: 3
    # Strategy for what to do when unhealthy
    # In this service, no action will occur when a container is found unhealthy
    strategy: recreate
    healthy_threshold: 2
    # Response timeout is measured in milliseconds
    response_timeout: 6000

redis:
  health_check:
    port: 6379
    request_line: ''
    interval: 2000
    initializing_timeout: 60000
    reinitializing_timeout: 60000
    unhealthy_threshold: 3
    strategy: recreate
    healthy_threshold: 2
    response_timeout: 2000
