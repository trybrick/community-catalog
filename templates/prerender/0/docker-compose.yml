prerender:
  image: niiknow/prerender-redis:1.0.1
  labels:
    # Make prerender a global service
    io.rancher.scheduler.global: 'true'
  links:
    - redis:redis
  restart: always
  tty: true
  stdin_open: true
  ports:
    - "4002:3000"
  environment:
    REDIS_URL: "${REDIS_URL}"
    PAGE_TTL: ${PAGE_TTL}
    BASIC_AUTH_USERNAME: "${BASIC_AUTH_USERNAME}"
    BASIC_AUTH_PASSWORD: "${BASIC_AUTH_PASSWORD}"
    PRERENDER_NUM_WORKERS: ${PRERENDER_NUM_WORKERS}

redis:
  image: niiknow/redis:0.0.2
  restart: always
  tty: true
  stdin_open: true
  labels:
    io.rancher.container.hostname_override: container_name
